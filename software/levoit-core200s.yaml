esphome:
  name: levoit-core200s
  friendly_name: levoit-core200s

esp32:
  board: esp32dev
  framework:
    type: esp-idf

# Enable logging
logger:

# Enable Home Assistant API
api:
  encryption:
    key: "TODO"

ota:
  - platform: esphome
    password: "TODO"

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Levoit Core200s Fallback Hotspot"
    password: "TODO"

captive_portal:


external_components:
  - source:
      type: git
      url: https://github.com/hiteule/esphome-levoit-core200s
      ref: master
    components: [ levoit-core200s ]

levoit-core200s:

fan:
  - platform: levoit-core200s
    id: fan_levoit_core200s
    name: Air Purifier
    pin_night: 27
    pin_low: 26
    pin_medium: 14
    pin_high: 25
    pin_led_night: 32
    pin_led_low: 17
    pin_led_medium: 18
    pin_led_high: 19

esp32_touch:
  setup_mode: false

binary_sensor:
  - platform: esp32_touch
    name: "Fan speed"
    pin: GPIO13
    threshold: 1510
    id: btn_fan_speed
    on_press:
      then:
        - fan.cycle_speed:
            id: fan_levoit_core200s
            off_speed_cycle: false
  - platform: esp32_touch
    name: "Fan power"
    pin: GPIO15
    threshold: 1640
    id: btn_fan_power
    on_press:
      then:
        - fan.toggle:
            id: fan_levoit_core200s